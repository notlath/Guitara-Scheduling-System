<!DOCTYPE html>
<html>
  <head>
    <title>Environment Debug</title>
  </head>
  <body>
    <h1>Environment Variables Debug</h1>
    <div id="debug"></div>
    <script type="module">
      const envVars = {
        VITE_API_BASE_URL: import.meta.env.VITE_API_BASE_URL,
        MODE: import.meta.env.MODE,
        DEV: import.meta.env.DEV,
        PROD: import.meta.env.PROD,
      };

      document.getElementById("debug").innerHTML = `
            <h2>Environment Variables:</h2>
            <pre>${JSON.stringify(envVars, null, 2)}</pre>
            
            <h2>Expected Login URL:</h2>
            <p>${envVars.VITE_API_BASE_URL}/auth/login/</p>
            
            <h2>Test API Call:</h2>
            <button onclick="testLogin()">Test Login API Call</button>
            <div id="result"></div>
        `;

      window.testLogin = async () => {
        try {
          const response = await fetch(
            `${envVars.VITE_API_BASE_URL}/auth/login/`,
            {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({ username: "test", password: "test" }),
            }
          );

          document.getElementById("result").innerHTML = `
                    <h3>Response:</h3>
                    <p>Status: ${response.status}</p>
                    <p>URL: ${response.url}</p>
                    <pre>${await response.text()}</pre>
                `;
        } catch (error) {
          document.getElementById("result").innerHTML = `
                    <h3>Error:</h3>
                    <pre>${error.message}</pre>
                `;
        }
      };
    </script>
  </body>
</html>
